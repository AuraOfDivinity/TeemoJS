const PREAMBLE = `\
///////////////////////////////////////////////
//                                           //
//                     !                     //
//   This file is automatically generated!   //
//           Do not directly edit!           //
//                                           //
///////////////////////////////////////////////`;

function capitalize(input) {
    return input[0].toUpperCase() + input.slice(1);
}

function decapitalize(input) {
    return input[0].toLowerCase() + input.slice(1);
}

function toUpperCamel(input) {
    return input.split('-').map(capitalize).join('');
}

function toLowerCamel(input) {
    return decapitalize(toUpperCamel(input));
}

function formatPropType(prop) {
    if ('array' === prop.type)
        return `Array<${formatPropType(prop.items)}>`;
    if ('object' === prop.type)
        return `{ [key: string]: ${formatPropType(prop.additionalProperties)} }`;
    if (prop.enum)
        return prop.enum.map(x => JSON.stringify(x)).join(' | ');
    if (prop.$ref) {
        const [ endpoint, model ] = prop.$ref.split('/').pop().split('.');
        return `${toLowerCamel(endpoint)}.${model}`;
    }
    return prop['x-type'];
}

module.exports = {
    PREAMBLE,
    capitalize,
    decapitalize,
    toUpperCamel,
    toLowerCamel,
    formatPropType,
};
